<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ComicTrackr</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="style.css"> </head>
<body class="bg-gray-50">
    <div id="app-container">
        <main class="p-4">
            <div id="message-box" role="alert">
                 <span id="message-box-icon" class="lucide"></span>
                 <span id="message-box-text">Message goes here</span>
            </div>

            <div id="view-collection" class="space-y-4">
                <h1 class="text-2xl font-bold text-gray-900">My Collection</h1>
                <div class="relative">
                    <input type="text" id="search-input" placeholder="Search by title, issue, publisher..." class="w-full p-2 pl-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-gray-800">
                    <span class="lucide icon-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></span>
                </div>
                 <div class="flex justify-end space-x-2">
                     <button id="toggle-view-btn" aria-label="Toggle grid/list view" class="p-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-indigo-500">
                        <span class="lucide icon-layout-grid icon-sm"></span>
                    </button>
                </div>
                <div id="collection-list" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4">
                    </div>
                <div id="collection-list-list-view" class="space-y-3 hidden">
                     </div>
                 <p id="no-comics-message" class="text-gray-500 col-span-full text-center hidden py-6">Your collection is empty. Add some comics!</p>
                 <div id="loading-spinner" class="loader hidden"></div>
            </div>

            <div id="view-add" class="hidden space-y-4">
                 <button id="back-to-collection-btn" class="mb-4 text-indigo-700 hover:text-indigo-900 flex items-center space-x-1 focus:outline-none focus:ring-2 focus:ring-indigo-500 rounded">
                    <span class="lucide icon-arrow-left icon-sm"></span>
                    <span>Back to Collection</span>
                </button>
                <h1 id="add-edit-title" class="text-2xl font-bold text-gray-900">Add New Comic</h1>
                <form id="comic-form" class="space-y-4 bg-white p-4 rounded-lg shadow" novalidate>
                    <input type="hidden" id="comic-id">
                    <div>
                        <label for="comic-title" class="block text-sm font-medium text-gray-700">Title <span class="text-red-500">*</span></label>
                        <input type="text" id="comic-title" required class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 text-gray-900">
                        <p class="text-red-600 text-xs italic mt-1 hidden" data-validation-for="comic-title">Title is required.</p>
                    </div>
                    <div>
                        <label for="comic-issue" class="block text-sm font-medium text-gray-700">Issue # <span class="text-red-500">*</span></label>
                        <input type="text" id="comic-issue" required class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 text-gray-900">
                         <p class="text-red-600 text-xs italic mt-1 hidden" data-validation-for="comic-issue">Issue number is required.</p>
                    </div>
                    <div>
                        <label for="comic-date" class="block text-sm font-medium text-gray-700">Release Date</label>
                        <input type="date" id="comic-date" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 text-gray-900">
                    </div>
                     <div>
                        <label for="comic-cost" class="block text-sm font-medium text-gray-700">Cost ($)</label>
                        <input type="number" step="0.01" min="0" id="comic-cost" placeholder="e.g., 3.99" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 text-gray-900">
                         <p class="text-red-600 text-xs italic mt-1 hidden" data-validation-for="comic-cost">Please enter a valid positive cost.</p>
                    </div>
                    <div>
                        <label for="comic-artist" class="block text-sm font-medium text-gray-700">Cover Artist</label>
                        <input type="text" id="comic-artist" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 text-gray-900">
                    </div>
                    <div>
                        <label for="comic-publisher" class="block text-sm font-medium text-gray-700">Publisher</label>
                        <input type="text" id="comic-publisher" list="publishers-list" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 text-gray-900">
                         <datalist id="publishers-list">
                            <option value="Marvel Comics">
                            <option value="DC Comics">
                            <option value="Image Comics">
                            <option value="Dark Horse Comics">
                            <option value="IDW Publishing">
                            <option value="Boom! Studios">
                            <option value="Dynamite Entertainment">
                            <option value="Valiant Comics">
                            <option value="Archie Comics">
                            <option value="AfterShock Comics">
                            <option value="Abstract Studio">
                            <option value="Avatar Press">
                            <option value="Oni Press">
                            <option value="Vault Comics">
                            <option value="VIZ Media">
                            <option value="Yen Press">
                            </datalist>
                    </div>
                     <div>
                        <label for="comic-cover-upload" class="block text-sm font-medium text-gray-700">Cover Photo</label>
                         <label for="comic-cover-upload" class="mt-1 inline-flex items-center space-x-2 py-1.5 px-3 rounded-md border border-gray-300 bg-indigo-600 text-white text-sm font-medium shadow-sm hover:bg-indigo-700 cursor-pointer focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-indigo-500">
                             <span class="lucide icon-camera icon-sm"></span>
                             <span>Upload/Take Photo</span>
                         </label>
                        <input id="comic-cover-upload" type="file" accept="image/*">
                        <img id="cover-preview" src="#" alt="Cover preview" class="mt-2 rounded-md max-h-40 hidden"/>
                        <input type="hidden" id="comic-cover-data">
                        <p class="text-red-600 text-xs italic mt-1 hidden" data-validation-for="comic-cover-upload">Image file is too large (max 2MB).</p>
                    </div>

                    <button type="submit" class="w-full inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-60 disabled:cursor-not-allowed">
                        <span id="save-btn-text">Save Comic</span>
                        <span id="save-btn-loader" class="inline-loader hidden"></span>
                    </button>
                </form>
            </div>

            <div id="view-detail" class="hidden space-y-4">
                 <button id="back-to-collection-detail-btn" class="mb-4 text-indigo-700 hover:text-indigo-900 flex items-center space-x-1 focus:outline-none focus:ring-2 focus:ring-indigo-500 rounded">
                    <span class="lucide icon-arrow-left icon-sm"></span>
                    <span>Back to Collection</span>
                </button>
                <div id="detail-content" class="bg-white p-4 rounded-lg shadow space-y-3 min-h-[200px]">
                    </div>
                <div class="flex space-x-2">
                    <button id="edit-comic-btn" class="flex-1 inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
                        Edit
                    </button>
                    <button id="delete-comic-btn" class="flex-1 inline-flex justify-center items-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500">
                        <span class="lucide icon-trash-2 mr-2"></span> Delete
                    </button>
                </div>
            </div>

             <div id="view-series" class="hidden space-y-4">
                 <button id="back-to-detail-btn" class="mb-4 text-indigo-700 hover:text-indigo-900 flex items-center space-x-1 focus:outline-none focus:ring-2 focus:ring-indigo-500 rounded">
                     <span class="lucide icon-arrow-left icon-sm"></span>
                    <span id="back-to-detail-comic-info">Back</span> </button>
                <h1 id="series-title" class="text-2xl font-bold text-gray-900">Series Title</h1> <div id="series-list" class="space-y-2">
                    <div class="loader"></div>
                </div>
            </div>

        </main>

        <footer class="fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-md z-50">
            <nav class="flex justify-around p-2">
                 <button data-view="collection" aria-label="View Collection" class="nav-btn flex flex-col items-center text-indigo-600 p-2 rounded-md w-1/3 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 focus:ring-1 focus:ring-indigo-500">
                     <span class="lucide icon-book-open icon-md"></span>
                    <span class="text-xs font-medium">Collection</span>
                </button>
                <button data-view="add" aria-label="Add Comic" class="nav-btn flex flex-col items-center text-gray-500 hover:text-indigo-600 hover:bg-gray-100 p-2 rounded-md w-1/3 focus:outline-none focus:bg-gray-100 focus:ring-1 focus:ring-indigo-500">
                     <span class="lucide icon-plus-circle icon-md"></span>
                    <span class="text-xs font-medium">Add Comic</span>
                </button>
                 <button id="scan-comic-btn" aria-label="Scan Comic (Simulated)" class="flex flex-col items-center text-gray-500 hover:text-indigo-600 hover:bg-gray-100 p-2 rounded-md w-1/3 focus:outline-none focus:bg-gray-100 focus:ring-1 focus:ring-indigo-500">
                     <span class="lucide icon-camera icon-md"></span>
                    <span class="text-xs font-medium">Scan Comic</span>
                </button>
            </nav>
        </footer>
    </div>

    <script src="script.js"></script> </body>
</html>
